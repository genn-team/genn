<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>GeNN: Preprocessor symbols for porting Random123 to different platforms.</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../multi-language-utils.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="../../html_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="../../GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">4.7.0</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/dcb/porting.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Preprocessor symbols for porting Random123 to different platforms. </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Random123 library is portable across C, C++, CUDA, OpenCL environments, and multiple operating systems (Linux, Windows 7, Mac OS X, FreeBSD, Solaris). This level of portability requires the abstraction of some features and idioms that are either not standardized (e.g., asm statments), or for which different vendors have their own standards (e.g., SSE intrinsics) or for which vendors simply refuse to conform to well-established standards (e.g., &lt;inttypes.h&gt;).</p>
<p><a class="el" href="../../d6/d4e/compilerfeatures_8h.html">Random123/features/compilerfeatures.h</a> conditionally includes a compiler-or-OS-specific Random123/featires/XXXfeatures.h file which defines appropriate values for the preprocessor symbols which can be used with a specific compiler or OS. Those symbols will then be used by other header files and source files in the Random123 library (and may be used by applications) to control what actually gets presented to the compiler.</p>
<p>Most of the symbols are boolean valued. In general, they will <b>always</b> be defined with value either 1 or 0, so do <b>NOT</b> use #ifdef. Use #if R123_USE_SOMETHING instead.</p>
<p>Library users can override any value by defining the pp-symbol with a compiler option, e.g., </p><pre class="fragment">cc -DR123_USE_MULHILO64_C99 
</pre><p>will use a strictly c99 version of the full-width 64x64-&gt;128-bit multiplication function, even if it would be disabled by default.</p>
<p>All boolean-valued pre-processor symbols in <a class="el" href="../../d6/d4e/compilerfeatures_8h.html">Random123/features/compilerfeatures.h</a> start with the prefix R123_USE_ </p><pre class="fragment">         AES_NI
         AES_OPENSSL
         SSE4_2
         SSE4_1
         SSE

         STD_RANDOM

         GNU_UINT128
         ASM_GNU
         ASM_MSASM

         CPUID_MSVC

         CXX11_RANDOM
         CXX11_TYPE_TRAITS
         CXX11_STATIC_ASSERT
         CXX11_CONSTEXPR
         CXX11_UNRESTRICTED_UNIONS
         CXX11_EXPLICIT_CONVERSIONS
         CXX11_LONG_LONG
         CXX11 
   
         X86INTRIN_H
         IA32INTRIN_H
         XMMINTRIN_H
         EMMINTRIN_H
         SMMINTRIN_H
         WMMINTRIN_H
         INTRIN_H

         MULHILO32_ASM
         MULHILO64_ASM
         MULHILO64_MSVC_INTRIN
         MULHILO64_CUDA_INTRIN
         MULHILO64_OPENCL_INTRIN
         MULHILO64_C99

         U01_DOUBLE</pre><p> Most have obvious meanings. Some non-obvious ones:</p>
<p>AES_NI and AES_OPENSSL are not mutually exclusive. You can have one, both or neither.</p>
<p>GNU_UINT128 says that it's safe to use __uint128_t, but it does not require its use. In particular, it should be used in mulhilo&lt;uint64_t&gt; only if MULHILO64_ASM is unset.</p>
<p>If the XXXINTRIN_H macros are true, then one should </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;xxxintrin.h&gt;</span></div></div><!-- fragment --><p> to gain accesss to compiler intrinsics.</p>
<p>The CXX11_SOME_FEATURE macros allow the code to use specific features of the C++11 language and library. The catchall In the absence of a specific CXX11_SOME_FEATURE, the feature is controlled by the catch-all R123_USE_CXX11 macro.</p>
<p>U01_DOUBLE defaults on, and can be turned off (set to 0) if one does not want the utility functions that convert to double (i.e. u01_*_53()), e.g. on OpenCL without the cl_khr_fp64 extension.</p>
<p>There are a number of invariants that are always true. Application code may choose to rely on these:</p>
<ul>
<li>
ASM_GNU and ASM_MASM are mutually exclusive </li>
<li>
The "higher" SSE values imply the lower ones. </li>
</ul>
<p>There are also non-boolean valued symbols:</p>
<ul>
<li>
<p class="startli">R123_STATIC_INLINE - According to both C99 and GNU99, the 'static inline' declaration allows the compiler to not emit code if the function is not used. Note that the semantics of 'inline', 'static' and 'extern' in gcc have changed over time and are subject to modification by command line options, e.g., -std=gnu89, -fgnu-inline. Nevertheless, it appears that the meaning of 'static inline' has not changed over time and (with a little luck) the use of 'static inline' here will be portable between versions of gcc and to other C99 compilers. See: <a href="http://gcc.gnu.org/onlinedocs/gcc/Inline.html">http://gcc.gnu.org/onlinedocs/gcc/Inline.html</a> <a href="http://www.greenend.org.uk/rjk/2003/03/inline.html">http://www.greenend.org.uk/rjk/2003/03/inline.html</a></p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="el" href="../../d2/dfd/openclfeatures_8h.html#a4581167d26e2520913721fb32bed1845">R123_FORCE_INLINE(decl)</a> - which expands to 'decl', adorned with the compiler-specific embellishments to strongly encourage that the declared function be inlined. If there is no such compiler-specific magic, it should expand to decl, unadorned.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">R123_CUDA_DEVICE - which expands to <b>device</b> (or something else with sufficiently similar semantics) when CUDA is in use, and expands to nothing in other cases.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="el" href="../../d2/dfd/openclfeatures_8h.html#a7d1fa84d7a60aff1e1894fbb98b41c7e">R123_ASSERT(x)</a> - which expands to assert(x), or maybe to nothing at all if we're in an environment so feature-poor that you can't even call assert (I'm looking at you, CUDA and OpenCL), or even include assert.h safely (OpenCL).</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">R123_STATIC_ASSERT(expr,msg) - which expands to static_assert(expr,msg), or to an expression that will raise a compile-time exception if expr is not true.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">R123_ULONG_LONG - which expands to a declaration of the longest available unsigned integer.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">R123_64BIT(x) - expands to something equivalent to <a class="el" href="../../d2/dfd/openclfeatures_8h.html#a134ae84400d184ed2570e3270d5472c2">UINT64_C(x)</a> from &lt;stdint.h&gt;, even in environments where &lt;stdint.h&gt; is not available, e.g., MSVC and OpenCL.</p>
<p class="endli"></p>
</li>
<li>
<a class="el" href="../../d2/dfd/openclfeatures_8h.html#abf36f906b45e4f3ec0999b270cd3a11f">R123_BUILTIN_EXPECT(expr,likely_value)</a> - expands to something with the semantics of gcc's __builtin_expect(expr,likely_value). If the environment has nothing like __builtin_expect, it should expand to just expr. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Feb 11 2022 17:17:45 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
<script type="text/javascript">
//<![CDATA[
addLanguageToggleButtons();
//]]>
</script>
</body>
</html>
