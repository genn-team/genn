<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>GeNN: Tutorial 2 (Python)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../multi-language-utils.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="../../html_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="../../GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">4.7.1</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('df/d0b/Tutorial2_Python.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Tutorial 2 (Python) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this tutorial we will learn to add synapsePopulations to connect neurons in neuron groups to each other with synaptic models. As an example we will connect the ten Hodgkin-Huxley neurons from tutorial 1 in a ring of excitatory synapses.</p>
<p>First, copy the files from Tutorial 1 into a new directory and rename the <code>tenHH.py</code> to <code>tenHHRing.py</code>, e.g. on Linux or Mac: </p><div class="fragment"><div class="line">&gt;&gt; cp -r tenHH_project tenHHRing_project</div><div class="line">&gt;&gt; cd tenHHRing_project</div><div class="line">&gt;&gt; mv tenHH.py tenHHRing.py</div></div><!-- fragment --><p> Finally, to reduce confusion we should rename the model itself. Open <code>tenHHRing.py</code>, change the model name inside, </p><div class="fragment"><div class="line">model = GeNNModel(<span class="stringliteral">&quot;float&quot;</span>, <span class="stringliteral">&quot;tenHHRing&quot;</span>)</div></div><!-- fragment --><p> You will also need to import some additional PyGeNN functions and constants: </p><div class="fragment"><div class="line">from <a class="code" href="../../da/d6d/namespacepygenn.html">pygenn</a>.<a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html">genn_model</a> <span class="keyword">import</span> (GeNNModel, <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a7fa33c9872ab0cf97d0b60fa41bf17fe">init_connectivity</a>, <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#acd7310ba25ce86ad93d8fc54debf0e68">create_cmlf_class</a>,</div><div class="line">                               <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a6afa899f0322db64b39395534d1e29d8">create_custom_sparse_connect_init_snippet_class</a>)</div><div class="line">from <a class="code" href="../../da/d6d/namespacepygenn.html">pygenn</a>.genn_wrapper <span class="keyword">import</span> <a class="code" href="../../dc/de1/modelSpec_8h.html#a291aa33d0e485ee09a6881cf8056e13c">NO_DELAY</a></div></div><!-- fragment --><h1><a class="anchor" id="SynapseMatrix"></a>
Defining the Detailed Synaptic Connections</h1>
<p>We want to connect our ten neurons into a ring where each neuron connects to its neighbours. In order to initialise this connectivity we need to add a sparse connectivity initialisation snippet at the top of <code>tenHHRing.cc</code>: </p><div class="fragment"><div class="line">ring_model = <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a6afa899f0322db64b39395534d1e29d8">create_custom_sparse_connect_init_snippet_class</a>(</div><div class="line">    <span class="stringliteral">&quot;ring&quot;</span>,</div><div class="line">    row_build_code=</div><div class="line">        <span class="stringliteral">&quot;&quot;</span><span class="stringliteral">&quot;</span></div><div class="line"><span class="stringliteral">        $(addSynapse, ($(id_pre) + 1) % $(num_post));</span></div><div class="line"><span class="stringliteral">        $(endRow);</span></div><div class="line"><span class="stringliteral">        &quot;</span><span class="stringliteral">&quot;&quot;</span>,</div><div class="line"></div><div class="line">    calc_max_row_len_func=<a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#acd7310ba25ce86ad93d8fc54debf0e68">create_cmlf_class</a>(</div><div class="line">        lambda num_pre, num_post, pars: 1)())</div></div><!-- fragment --><p> The <code>row_build_code</code> code string will be called to generate each row of the synaptic matrix (connections coming from a single presynaptic neuron) and, in this case, each row consists of a single synapses from the presynaptic neuron $(id_pre) to $(id_pre) + 1 (the modulus operator is used to ensure that the final connection between neuron <code>9</code> and <code>0</code> is made correctly). In order to allow GeNN to better optimise the generated code we also provide a maximum row length. In this case each row always contains only one synapse but, when more complex connectivity is used, the number of neurons in the pre and postsynaptic population as well as any parameters used to configure the snippet can be accessed from this function. </p><dl class="section note"><dt>Note</dt><dd>When defining GeNN code strings, the $(VariableName) syntax is used to refer to variables provided by GeNN and the $(FunctionName, Parameter1,...) syntax is used to call functions provided by GeNN.</dd></dl>
<h1><a class="anchor" id="addSynapse"></a>
Adding Synaptic connections</h1>
<p>Now we need additional initial values and parameters for the synapse and post-synaptic models. We will use the standard <a class="el" href="../../d9/d74/classWeightUpdateModels_1_1StaticPulse.html" title="Pulse-coupled, static synapse. ">WeightUpdateModels::StaticPulse</a> weight update model and <a class="el" href="../../d5/d27/classPostsynapticModels_1_1ExpCond.html" title="Exponential decay with synaptic input treated as a conductance value. ">PostsynapticModels::ExpCond</a> post-synaptic model. They need the following initial variables and parameters: </p><div class="fragment"><div class="line">s_ini = {<span class="stringliteral">&quot;g&quot;</span>: -0.2}</div><div class="line"></div><div class="line">ps_p = {<span class="stringliteral">&quot;tau&quot;</span>: 1.0, # Decay time constant [ms] </div><div class="line">        <span class="stringliteral">&quot;E&quot;</span>: -80.0} # Reversal potential [mV]</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>the <a class="el" href="../../d9/d74/classWeightUpdateModels_1_1StaticPulse.html" title="Pulse-coupled, static synapse. ">WeightUpdateModels::StaticPulse</a> weight update model has no parameters and the <a class="el" href="../../d5/d27/classPostsynapticModels_1_1ExpCond.html" title="Exponential decay with synaptic input treated as a conductance value. ">PostsynapticModels::ExpCond</a> post-synaptic model has no state variables.</dd></dl>
<p>We can then add a synapse population at the end of the <code>modelDefinition(...)</code> function, </p><div class="fragment"><div class="line">model.add_synapse_population(<span class="stringliteral">&quot;Pop1self&quot;</span>, <span class="stringliteral">&quot;SPARSE_GLOBALG&quot;</span>, 10,</div><div class="line">    pop1, pop1,</div><div class="line">    <span class="stringliteral">&quot;StaticPulse&quot;</span>, {}, s_ini, {}, {},</div><div class="line">    <span class="stringliteral">&quot;ExpCond&quot;</span>, ps_p, {},</div><div class="line">    <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a7fa33c9872ab0cf97d0b60fa41bf17fe">init_connectivity</a>(ring_model, {}))</div></div><!-- fragment --><p> The <a class="el" href="../../db/d57/classpygenn_1_1genn__model_1_1GeNNModel.html#ab573f92c82ec25d5c80f94070b6008c0" title="Add a synapse population to the GeNN model. ">pygenn.GeNNModel.add_synapse_population</a> parameters are </p><ul>
<li><code>pop_name</code>: The name of the synapse population </li>
<li><code>matrix_type</code>: String specifying how the synaptic matrix is stored. See <a class="el" href="../../d5/d39/subsect34.html">Synaptic matrix types</a> for available options. </li>
<li><code>delay_steps</code>: Homogeneous (axonal) delay for synapse population (in terms of the simulation time step <code>DT</code>). </li>
<li><code>source</code>: pygenn.NeuronGroup or name of the (existing!) presynaptic neuron population. </li>
<li><code>target</code>: pygenn.NeuronGroup or name of the (existing!) postsynaptic neuron population. </li>
<li><code>w_update_model</code>: The type of weight update model. This should either be a string containing the name of a built in model or user-defined neuron type returned by <a class="el" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a7c2e854789f74d6ffd92be2a487a0e5b" title="This helper function creates a custom WeightUpdateModel class. ">pygenn.genn_model.create_custom_weight_update_class</a> (see <a class="el" href="../../d5/d24/sectSynapseModels.html">Weight update models</a>). </li>
<li><code>wu_param_space</code>: Dictionary containing the parameter values (common to all synapses of the population) for the weight update model. </li>
<li><code>wu_var_space</code>: Dictionary containing the initial values or initialisation snippets for the weight update model's state variables </li>
<li><code>wu_pre_var_space</code>: Dictionary containing the initial values or initialisation snippets for the weight update model's presynaptic state variables </li>
<li><code>wu_post_var_space</code>: Dictionary containg the initial values or initialisation snippets for the weight update model's postsynaptic state variables </li>
<li><code>postsyn_model</code>: The type of postsynaptic model. This should either be a string containing the name of a built in model or user-defined neuron type returned by <a class="el" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a091ea4fe261201327c877528287f9611" title="This helper function creates a custom PostsynapticModel class. ">pygenn.genn_model.create_custom_postsynaptic_class</a> (see <a class="el" href="../../dd/de4/sect_postsyn.html">Postsynaptic integration methods</a>). </li>
<li><code>ps_param_space</code>: Dictionary containing the parameter values (common to all postsynaptic neurons) for the postsynaptic model. </li>
<li><code>ps_var_space</code>: Dictionary containing the initial values or initialisation snippets for variables for the postsynaptic model's state variables </li>
<li><code>connectivity_initialiser</code>: Optional argument, specifying the initialisation snippet for synapse population's sparse connectivity (see <a class="el" href="../../d5/dd4/sectSparseConnectivityInitialisation.html">Sparse connectivity initialisation</a>).</li>
</ul>
<p>Adding the <a class="el" href="../../db/d57/classpygenn_1_1genn__model_1_1GeNNModel.html#ab573f92c82ec25d5c80f94070b6008c0" title="Add a synapse population to the GeNN model. ">pygenn.GeNNModel.add_synapse_population</a> command to the model definition informs GeNN that there will be synapses between the named neuron populations, here between population <code>Pop1</code> and itself with a delay of 10 (0.1 ms) timesteps. At this point our script <code>tenHHRing.py</code> should look like this </p><div class="fragment"><div class="line"><span class="keyword">import</span> matplotlib.pyplot as plt</div><div class="line"><span class="keyword">import</span> numpy as np</div><div class="line">from <a class="code" href="../../da/d6d/namespacepygenn.html">pygenn</a>.<a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html">genn_model</a> <span class="keyword">import</span> (GeNNModel, <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a7fa33c9872ab0cf97d0b60fa41bf17fe">init_connectivity</a>, <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#acd7310ba25ce86ad93d8fc54debf0e68">create_cmlf_class</a>,</div><div class="line">                               <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a6afa899f0322db64b39395534d1e29d8">create_custom_sparse_connect_init_snippet_class</a>)</div><div class="line">from <a class="code" href="../../da/d6d/namespacepygenn.html">pygenn</a>.genn_wrapper <span class="keyword">import</span> <a class="code" href="../../dc/de1/modelSpec_8h.html#a291aa33d0e485ee09a6881cf8056e13c">NO_DELAY</a></div><div class="line"></div><div class="line">ring_model = <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a6afa899f0322db64b39395534d1e29d8">create_custom_sparse_connect_init_snippet_class</a>(</div><div class="line">    <span class="stringliteral">&quot;ring&quot;</span>,</div><div class="line">    row_build_code=</div><div class="line">        <span class="stringliteral">&quot;&quot;</span><span class="stringliteral">&quot;</span></div><div class="line"><span class="stringliteral">        $(addSynapse, ($(id_pre) + 1) % $(num_post));</span></div><div class="line"><span class="stringliteral">        $(endRow);</span></div><div class="line"><span class="stringliteral">        &quot;</span><span class="stringliteral">&quot;&quot;</span>,</div><div class="line"></div><div class="line">    calc_max_row_len_func=<a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#acd7310ba25ce86ad93d8fc54debf0e68">create_cmlf_class</a>(</div><div class="line">        lambda num_pre, num_post, pars: 1)())</div><div class="line"></div><div class="line">model = GeNNModel(<span class="stringliteral">&quot;float&quot;</span>, <span class="stringliteral">&quot;tenHHRing&quot;</span>)</div><div class="line">model.dT = 0.1</div><div class="line"></div><div class="line">p = {<span class="stringliteral">&quot;gNa&quot;</span>: 7.15,   # Na conductance in [muS]</div><div class="line">     <span class="stringliteral">&quot;ENa&quot;</span>: 50.0,   # Na equi potential [mV]</div><div class="line">     <span class="stringliteral">&quot;gK&quot;</span>: 1.43,    # K conductance in [muS]</div><div class="line">     <span class="stringliteral">&quot;EK&quot;</span>: -95.0,   # K equi potential [mV] </div><div class="line">     <span class="stringliteral">&quot;gl&quot;</span>: 0.02672, # leak conductance [muS]</div><div class="line">     <span class="stringliteral">&quot;El&quot;</span>: -63.563, # El: leak equi potential in mV, </div><div class="line">     <span class="stringliteral">&quot;C&quot;</span>: 0.143}    # membr. capacity density in nF</div><div class="line"></div><div class="line">ini = {<span class="stringliteral">&quot;V&quot;</span>: -60.0,      # membrane potential</div><div class="line">       <span class="stringliteral">&quot;m&quot;</span>: 0.0529324,  # prob. <span class="keywordflow">for</span> Na channel activation</div><div class="line">       <span class="stringliteral">&quot;h&quot;</span>: 0.3176767,  # prob. <span class="keywordflow">for</span> not Na channel blocking</div><div class="line">       <span class="stringliteral">&quot;n&quot;</span>: 0.5961207}  # prob. <span class="keywordflow">for</span> K channel activation</div><div class="line"></div><div class="line">s_ini = {<span class="stringliteral">&quot;g&quot;</span>: -0.2}</div><div class="line"></div><div class="line">ps_p = {<span class="stringliteral">&quot;tau&quot;</span>: 1.0, # Decay time constant [ms] </div><div class="line">        <span class="stringliteral">&quot;E&quot;</span>: -80.0} # Reversal potential [mV]</div><div class="line"></div><div class="line">pop1 = model.add_neuron_population(<span class="stringliteral">&quot;Pop1&quot;</span>, 10, <span class="stringliteral">&quot;TraubMiles&quot;</span>, p, ini)</div><div class="line"></div><div class="line">model.add_synapse_population(<span class="stringliteral">&quot;Pop1self&quot;</span>, <span class="stringliteral">&quot;SPARSE_GLOBALG&quot;</span>, 10,</div><div class="line">    pop1, pop1,</div><div class="line">    <span class="stringliteral">&quot;StaticPulse&quot;</span>, {}, s_ini, {}, {},</div><div class="line">    <span class="stringliteral">&quot;ExpCond&quot;</span>, ps_p, {},</div><div class="line">    <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a7fa33c9872ab0cf97d0b60fa41bf17fe">init_connectivity</a>(ring_model, {}))</div><div class="line"></div><div class="line">model.build()</div><div class="line">model.load()</div><div class="line"></div><div class="line">v = np.empty((2000, 10))</div><div class="line">v_view = pop1.vars[<span class="stringliteral">&quot;V&quot;</span>].view</div><div class="line"><span class="keywordflow">while</span> model.t &lt; 200.0:</div><div class="line">    model.step_time()</div><div class="line"></div><div class="line">    pop1.pull_var_from_device(<span class="stringliteral">&quot;V&quot;</span>)</div><div class="line">    </div><div class="line">    v[model.timestep - 1,:]=v_view[:]</div><div class="line"></div><div class="line">fig, axis = plt.subplots()</div><div class="line">axis.plot(v)</div><div class="line">plt.show()</div></div><!-- fragment --><p>We can now we can build and run our new model in the same way we did in <a class="el" href="../../d6/d8b/Tutorial1_Python.html">Tutorial 1 (Python)</a>. However, even after all our hard work, the result looks very similar to the plot we obtained at the end of <a class="el" href="../../d6/d8b/Tutorial1_Python.html">Tutorial 1 (Python)</a>. </p><div class="image">
<img src="../../tenHHRingexample1.png" alt="tenHHRingexample1.png"/>
</div>
 <p>This is because none of the neurons are spiking so there are no spikes to propagate around the ring.</p>
<h1><a class="anchor" id="initialConditions"></a>
Providing initial stimuli</h1>
<p>We can use a <a class="el" href="../../db/d38/classNeuronModels_1_1SpikeSourceArray.html" title="Spike source array. ">NeuronModels::SpikeSourceArray</a> to inject an initial spike into the first neuron in the ring during the first timestep to start spikes propagating. We then need to add it to the network by adding the following before we call <a class="el" href="../../db/d57/classpygenn_1_1genn__model_1_1GeNNModel.html#a860896623fb19b828a4ffa17bd664d08" title="Finalize and build a GeNN model. ">pygenn.GeNNModel.build</a>:</p>
<div class="fragment"><div class="line">stim_ini = {<span class="stringliteral">&quot;startSpike&quot;</span>: [0], <span class="stringliteral">&quot;endSpike&quot;</span>: [1]}</div><div class="line">stim = model.add_neuron_population(<span class="stringliteral">&quot;Stim&quot;</span>, 1, <span class="stringliteral">&quot;SpikeSourceArray&quot;</span>, {}, stim_ini)</div><div class="line">stim.set_extra_global_param(<span class="stringliteral">&quot;spikeTimes&quot;</span>, [0.0])</div><div class="line"></div><div class="line">model.add_synapse_population(<span class="stringliteral">&quot;StimPop1&quot;</span>, <span class="stringliteral">&quot;SPARSE_GLOBALG&quot;</span>, <a class="code" href="../../dc/de1/modelSpec_8h.html#a291aa33d0e485ee09a6881cf8056e13c">NO_DELAY</a>,</div><div class="line">    stim, pop1,</div><div class="line">    <span class="stringliteral">&quot;StaticPulse&quot;</span>, {}, s_ini, {}, {},</div><div class="line">    <span class="stringliteral">&quot;ExpCond&quot;</span>, ps_p, {},</div><div class="line">    <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a7fa33c9872ab0cf97d0b60fa41bf17fe">init_connectivity</a>(<span class="stringliteral">&quot;OneToOne&quot;</span>, {}))</div></div><!-- fragment --><p> Each neuron in the spike source array population has its own list of spikes which are concatenated together and stored in an array made accesible to all neurons in the population using an extra global parameter (see <a class="el" href="../../de/ded/sectNeuronModels.html#neuron_extra_global_param">Extra global parameters</a>). The <code>startSpike</code> and <code>endSpike</code> variables are then initialised with the indices of each neuron's section of the <code>spikeTimes</code> extra global parameter array. We then connect the spike source array to Pop1 using another synapse population with sparse connectivity, initialised using the built in <a class="el" href="../../d5/dd3/classInitSparseConnectivitySnippet_1_1OneToOne.html" title="Initialises connectivity to a &#39;one-to-one&#39; diagonal matrix. ">InitSparseConnectivitySnippet::OneToOne</a> model so the single neuron in the Stim population is connected to the first neuron in the ring. At this point our user code <code>tenHHRing.py</code> should look like this </p><div class="fragment"><div class="line"><span class="keyword">import</span> matplotlib.pyplot as plt</div><div class="line"><span class="keyword">import</span> numpy as np</div><div class="line">from <a class="code" href="../../da/d6d/namespacepygenn.html">pygenn</a>.<a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html">genn_model</a> <span class="keyword">import</span> (GeNNModel, <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a7fa33c9872ab0cf97d0b60fa41bf17fe">init_connectivity</a>, <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#acd7310ba25ce86ad93d8fc54debf0e68">create_cmlf_class</a>,</div><div class="line">                               <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a6afa899f0322db64b39395534d1e29d8">create_custom_sparse_connect_init_snippet_class</a>)</div><div class="line">from <a class="code" href="../../da/d6d/namespacepygenn.html">pygenn</a>.genn_wrapper <span class="keyword">import</span> <a class="code" href="../../dc/de1/modelSpec_8h.html#a291aa33d0e485ee09a6881cf8056e13c">NO_DELAY</a></div><div class="line"></div><div class="line">ring_model = <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a6afa899f0322db64b39395534d1e29d8">create_custom_sparse_connect_init_snippet_class</a>(</div><div class="line">    <span class="stringliteral">&quot;ring&quot;</span>,</div><div class="line">    row_build_code=</div><div class="line">        <span class="stringliteral">&quot;&quot;</span><span class="stringliteral">&quot;</span></div><div class="line"><span class="stringliteral">        $(addSynapse, ($(id_pre) + 1) % $(num_post));</span></div><div class="line"><span class="stringliteral">        $(endRow);</span></div><div class="line"><span class="stringliteral">        &quot;</span><span class="stringliteral">&quot;&quot;</span>,</div><div class="line"></div><div class="line">    calc_max_row_len_func=<a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#acd7310ba25ce86ad93d8fc54debf0e68">create_cmlf_class</a>(</div><div class="line">        lambda num_pre, num_post, pars: 1)())</div><div class="line"></div><div class="line">model = GeNNModel(<span class="stringliteral">&quot;float&quot;</span>, <span class="stringliteral">&quot;tenHHRing&quot;</span>)</div><div class="line">model.dT = 0.1</div><div class="line"></div><div class="line">p = {<span class="stringliteral">&quot;gNa&quot;</span>: 7.15,   # Na conductance in [muS]</div><div class="line">     <span class="stringliteral">&quot;ENa&quot;</span>: 50.0,   # Na equi potential [mV]</div><div class="line">     <span class="stringliteral">&quot;gK&quot;</span>: 1.43,    # K conductance in [muS]</div><div class="line">     <span class="stringliteral">&quot;EK&quot;</span>: -95.0,   # K equi potential [mV] </div><div class="line">     <span class="stringliteral">&quot;gl&quot;</span>: 0.02672, # leak conductance [muS]</div><div class="line">     <span class="stringliteral">&quot;El&quot;</span>: -63.563, # El: leak equi potential in mV, </div><div class="line">     <span class="stringliteral">&quot;C&quot;</span>: 0.143}    # membr. capacity density in nF</div><div class="line"></div><div class="line">ini = {<span class="stringliteral">&quot;V&quot;</span>: -60.0,      # membrane potential</div><div class="line">       <span class="stringliteral">&quot;m&quot;</span>: 0.0529324,  # prob. <span class="keywordflow">for</span> Na channel activation</div><div class="line">       <span class="stringliteral">&quot;h&quot;</span>: 0.3176767,  # prob. <span class="keywordflow">for</span> not Na channel blocking</div><div class="line">       <span class="stringliteral">&quot;n&quot;</span>: 0.5961207}  # prob. <span class="keywordflow">for</span> K channel activation</div><div class="line"></div><div class="line">s_ini = {<span class="stringliteral">&quot;g&quot;</span>: -0.2}</div><div class="line"></div><div class="line">ps_p = {<span class="stringliteral">&quot;tau&quot;</span>: 1.0, # Decay time constant [ms] </div><div class="line">        <span class="stringliteral">&quot;E&quot;</span>: -80.0} # Reversal potential [mV]</div><div class="line"></div><div class="line"></div><div class="line">stim_ini = {<span class="stringliteral">&quot;startSpike&quot;</span>: [0], <span class="stringliteral">&quot;endSpike&quot;</span>: [1]}</div><div class="line"></div><div class="line">pop1 = model.add_neuron_population(<span class="stringliteral">&quot;Pop1&quot;</span>, 10, <span class="stringliteral">&quot;TraubMiles&quot;</span>, p, ini)</div><div class="line">stim = model.add_neuron_population(<span class="stringliteral">&quot;Stim&quot;</span>, 1, <span class="stringliteral">&quot;SpikeSourceArray&quot;</span>, {}, stim_ini)</div><div class="line"></div><div class="line">model.add_synapse_population(<span class="stringliteral">&quot;Pop1self&quot;</span>, <span class="stringliteral">&quot;SPARSE_GLOBALG&quot;</span>, 10,</div><div class="line">    pop1, pop1,</div><div class="line">    <span class="stringliteral">&quot;StaticPulse&quot;</span>, {}, s_ini, {}, {},</div><div class="line">    <span class="stringliteral">&quot;ExpCond&quot;</span>, ps_p, {},</div><div class="line">    init_connectivity(ring_model, {}))</div><div class="line"></div><div class="line">model.add_synapse_population(<span class="stringliteral">&quot;StimPop1&quot;</span>, <span class="stringliteral">&quot;SPARSE_GLOBALG&quot;</span>, <a class="code" href="../../dc/de1/modelSpec_8h.html#a291aa33d0e485ee09a6881cf8056e13c">NO_DELAY</a>,</div><div class="line">    stim, pop1,</div><div class="line">    <span class="stringliteral">&quot;StaticPulse&quot;</span>, {}, s_ini, {}, {},</div><div class="line">    <span class="stringliteral">&quot;ExpCond&quot;</span>, ps_p, {},</div><div class="line">    <a class="code" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a7fa33c9872ab0cf97d0b60fa41bf17fe">init_connectivity</a>(<span class="stringliteral">&quot;OneToOne&quot;</span>, {}))</div><div class="line">stim.set_extra_global_param(<span class="stringliteral">&quot;spikeTimes&quot;</span>, [0.0])</div><div class="line"></div><div class="line">model.build()</div><div class="line">model.load()</div><div class="line"></div><div class="line">v = np.empty((2000, 10))</div><div class="line">v_view = pop1.vars[<span class="stringliteral">&quot;V&quot;</span>].view</div><div class="line"><span class="keywordflow">while</span> model.t &lt; 200.0:</div><div class="line">    model.step_time()</div><div class="line"></div><div class="line">    pop1.pull_var_from_device(<span class="stringliteral">&quot;V&quot;</span>)</div><div class="line">    </div><div class="line">    v[model.timestep - 1,:]=v_view[:]</div><div class="line"></div><div class="line">fig, axis = plt.subplots()</div><div class="line">axis.plot(v)</div><div class="line">plt.show()</div></div><!-- fragment --><p>Finally if we build, make and run this model; and plot the first 200 ms of the ten neurons' membrane voltages - they now looks like this: </p><div class="image">
<img src="../../tenHHRingexample2.png" alt="tenHHRingexample2.png"/>
</div>
 <hr/>
<p> <a class="el" href="../../dc/d7e/Tutorial2.html">Previous</a> | <a class="el" href="../../df/d0b/Tutorial2_Python.html">Top</a> | <a class="el" href="../../d0/da6/UserGuide.html">Next</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Apr 29 2022 10:38:21 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
<script type="text/javascript">
//<![CDATA[
addLanguageToggleButtons();
//]]>
</script>
</body>
</html>
