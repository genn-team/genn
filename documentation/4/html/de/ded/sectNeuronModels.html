<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>GeNN: Neuron models</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../multi-language-utils.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="../../html_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="../../GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">4.5.0</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/ded/sectNeuronModels.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Neuron models </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There is a number of predefined models which can be used with the <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../da/dfd/classModelSpec.html#ad990a7f4af4616daf1ba633133616269" title="Adds a new neuron group to the model using a neuron model managed by the user. ">ModelSpec::addNeuronPopulation</a></span><span class='toggleable_div label_python' style='display: none;'><a class="el" href="../../db/d57/classpygenn_1_1genn__model_1_1GeNNModel.html#a100324e214546094fced5e66fb0582d4" title="Add a neuron population to the GeNN model. ">pygenn.genn_model.GeNNModel.add_neuron_population</a></span> method:</p><ul>
<li><a class="el" href="../../db/d23/classNeuronModels_1_1RulkovMap.html" title="Rulkov Map neuron. ">NeuronModels::RulkovMap</a></li>
<li><a class="el" href="../../d7/d0a/classNeuronModels_1_1Izhikevich.html" title="Izhikevich neuron with fixed parameters . ">NeuronModels::Izhikevich</a></li>
<li><a class="el" href="../../dc/d87/classNeuronModels_1_1IzhikevichVariable.html" title="Izhikevich neuron with variable parameters . ">NeuronModels::IzhikevichVariable</a></li>
<li><a class="el" href="../../d0/d6d/classNeuronModels_1_1LIF.html">NeuronModels::LIF</a></li>
<li><a class="el" href="../../d5/d1f/classNeuronModels_1_1SpikeSource.html" title="Empty neuron which allows setting spikes from external sources. ">NeuronModels::SpikeSource</a></li>
<li><a class="el" href="../../db/d38/classNeuronModels_1_1SpikeSourceArray.html" title="Spike source array. ">NeuronModels::SpikeSourceArray</a></li>
<li><a class="el" href="../../dc/dc0/classNeuronModels_1_1PoissonNew.html" title="Poisson neurons. ">NeuronModels::PoissonNew</a></li>
<li><a class="el" href="../../d2/dc3/classNeuronModels_1_1TraubMiles.html" title="Hodgkin-Huxley neurons with Traub &amp; Miles algorithm. ">NeuronModels::TraubMiles</a></li>
<li><a class="el" href="../../dc/d4c/classNeuronModels_1_1TraubMilesFast.html" title="Hodgkin-Huxley neurons with Traub &amp; Miles algorithm: Original fast implementation, using 25 inner iterations. ">NeuronModels::TraubMilesFast</a></li>
<li><a class="el" href="../../d0/df2/classNeuronModels_1_1TraubMilesAlt.html" title="Hodgkin-Huxley neurons with Traub &amp; Miles algorithm. ">NeuronModels::TraubMilesAlt</a></li>
<li><a class="el" href="../../d6/d08/classNeuronModels_1_1TraubMilesNStep.html" title="Hodgkin-Huxley neurons with Traub &amp; Miles algorithm. ">NeuronModels::TraubMilesNStep</a></li>
</ul>
<p> <div class='toggleable_div label_python' style='display: none;'> In Python, these models can be selected by their unqualified name e.g. "Izhikevich".  </div></p>
<h1><a class="anchor" id="sect_own"></a>
Defining your own neuron type</h1>
<p>In order to define a new neuron type for use in a GeNN application, it is necessary to define a new class derived from <a class="el" href="../../d7/dad/classNeuronModels_1_1Base.html" title="Base class for all neuron models. ">NeuronModels::Base</a>. For convenience, <span class='toggleable_div label_cpp' style='display: none;'>the methods this class should implement can be implemented using macros</span><span class='toggleable_div label_python' style='display: none;'>this can be done using the <code><a class="el" href="../../de/d6e/namespacepygenn_1_1genn__model.html#a80f3b56cb2dc934ea04ed15a629c7db9" title="This helper function creates a custom NeuronModel class. ">pygenn.genn_model.create_custom_neuron_class</a></code> function with the following basic keyword arguments</span>:</p><ul>
<li> <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../d4/d13/models_8h.html#ae0c817e85c196f39cf62d608883cda13">DECLARE_MODEL(TYPE, NUM_PARAMS, NUM_VARS)</a>: declared the boilerplate code required for the model e.g. the correct specialisations of NewModels::ValueBase used to wrap the neuron model parameters and values</span><span class='toggleable_div label_python' style='display: none;'> <code>class_name</code>: the name of the new model </span>.</li>
<li> <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../dc/dab/weightUpdateModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE(SIM_CODE)</a></span><span class='toggleable_div label_python' style='display: none;'><code>sim_code=SIM_CODE</code> </span>: where SIM_CODE contains the code for executing the integration of the model for one time stepWithin this code string, variables need to be referred to by $(NAME), where NAME is the name of the variable as defined in the vector varNames. The code may refer to the predefined primitives <code>DT</code> for the time step size and <code></code> for the total incoming synaptic current. It can also refer to a unique ID (within the population) using .</li>
<li> <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../d3/dc0/neuronModels_8h.html#a9c94b28e6356469d85e3376f3336f0a2">SET_THRESHOLD_CONDITION_CODE(THRESHOLD_CONDITION_CODE)</a></span><span class='toggleable_div label_python' style='display: none;'><code>threshold_condition_code=THRESHOLD_CONDITION_CODE</code> </span> defines the condition for true spike detection.</li>
<li> <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../d3/dc0/neuronModels_8h.html#a83b79ae440c7b91c4699b81dac350637">SET_RESET_CODE(RESET_CODE)</a></span><span class='toggleable_div label_python' style='display: none;'><code>reset_code=RESET_CODE</code> </span> defines code to be run after a true spike is emitted.</li>
<li> <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../de/d6c/snippet_8h.html#a75315265035fd71c5b5f7d7f449edbd7">SET_PARAM_NAMES()</a></span><span class='toggleable_div label_python' style='display: none;'><code>param_names</code> </span> defines the names of the model parameters. If defined as <code>NAME</code> here, they can then be referenced as $(NAME) in the code string.  <div class='toggleable_div label_cpp' style='display: none;'> The length of this list should match the NUM_PARAM specified in DECLARE_MODEL. </div> Parameters are assumed to be always of type double.</li>
<li> <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../d4/d13/models_8h.html#a3025b9fc844fccdf8cc2b51ef4a6e0aa">SET_VARS()</a></span><span class='toggleable_div label_python' style='display: none;'><code>var_name_types</code> </span> defines the names, type strings (e.g. "float", "double", etc) and (optionally) access mode of the neuron state variables. The type string "scalar" can be used for variables which should be implemented using the precision set globally for the model <span class='toggleable_div label_cpp' style='display: none;'>with <a class="el" href="../../da/dfd/classModelSpec.html#a7548f1bf634884c051e4fbac3cf6212c" title="Set numerical precision for floating point. ">ModelSpec::setPrecision</a></span><span class='toggleable_div label_python' style='display: none;'> from <code><a class="el" href="../../db/d57/classpygenn_1_1genn__model_1_1GeNNModel.html#a707a6343ef7de18dec66b562d3ab19af" title="Init GeNNModel. ">pygenn.genn_model.GeNNModel.__init__</a></code> </span>. The variables defined here as <code>NAME</code> can then be used in the syntax $(NAME) in the code string. If the access mode is set to <span class='toggleable_div label_cpp' style='display: none;'><code><a class="el" href="../../de/dfb/varAccess_8h.html#ae8a5891c5d3beb45321e2f850539452fa47c7e7cb36a953a8c47e02000036bb44">VarAccess::READ_ONLY</a></code> </span><span class='toggleable_div label_python' style='display: none;'><code>VarAccess_READ_ONLY</code> </span>, GeNN applies additional optimisations and models should not write to it.</li>
<li> <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../d3/dc0/neuronModels_8h.html#a8e76c0c83549fc188cc73f323895b445">SET_NEEDS_AUTO_REFRACTORY()</a></span><span class='toggleable_div label_python' style='display: none;'> <code>is_auto_refractory_required</code> </span> defines whether the neuron should include an automatic refractory period to prevent it emitting spikes in successive timesteps.</li>
</ul>
<p>For example, we can define a leaky integrator <img class="formulaInl" alt="$\tau\frac{dV}{dt}= -V + I_{{\rm syn}}$" src="../../form_0.png"/> solved using Euler's method:</p>
<p> <div class='toggleable_div label_cpp' style='display: none;'></p><div class="fragment"><div class="line"><span class="keyword">class </span>LeakyIntegrator : <span class="keyword">public</span> <a class="code" href="../../d7/dad/classNeuronModels_1_1Base.html">NeuronModels::Base</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <a class="code" href="../../d4/d13/models_8h.html#ae0c817e85c196f39cf62d608883cda13">DECLARE_MODEL</a>(LeakyIntegrator, 1, 1);</div><div class="line">    </div><div class="line">    <a class="code" href="../../d3/dc0/neuronModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE</a>(<span class="stringliteral">&quot;$(V)+= (-$(V)+$(Isyn))*(DT/$(tau));&quot;</span>);</div><div class="line">    <a class="code" href="../../d3/dc0/neuronModels_8h.html#a9c94b28e6356469d85e3376f3336f0a2">SET_THRESHOLD_CONDITION_CODE</a>(<span class="stringliteral">&quot;$(V) &gt;= 1.0&quot;</span>);</div><div class="line">    <a class="code" href="../../d3/dc0/neuronModels_8h.html#a83b79ae440c7b91c4699b81dac350637">SET_RESET_CODE</a>(<span class="stringliteral">&quot;$(V) = 0.0;&quot;</span>);</div><div class="line">    </div><div class="line">    <a class="code" href="../../de/d6c/snippet_8h.html#a75315265035fd71c5b5f7d7f449edbd7">SET_PARAM_NAMES</a>({<span class="stringliteral">&quot;tau&quot;</span>});</div><div class="line">    </div><div class="line">    <a class="code" href="../../d4/d13/models_8h.html#a3025b9fc844fccdf8cc2b51ef4a6e0aa">SET_VARS</a>({{<span class="stringliteral">&quot;V&quot;</span>, <span class="stringliteral">&quot;scalar&quot;</span>, <a class="code" href="../../de/dfb/varAccess_8h.html#ae8a5891c5d3beb45321e2f850539452faa7b843fb734e3b3fea8e5f902d3f4144">VarAccess::READ_WRITE</a>}});</div><div class="line">};</div><div class="line"><a class="code" href="../../d4/d13/models_8h.html#a0f3d066ed16dd93ee24912f38826520b">IMPLEMENT_MODEL</a>(LeakyIntegrator);</div></div><!-- fragment --><p> </div>  <div class='toggleable_div label_python' style='display: none;'></p><div class="fragment"><div class="line">leaky_integrator_model = genn_model.create_custom_neuron_class(</div><div class="line">    <span class="stringliteral">&quot;leaky_integrator&quot;</span>,</div><div class="line">    </div><div class="line">    sim_code=<span class="stringliteral">&quot;$(V)+= (-$(V)+$(Isyn))*(DT/$(tau));&quot;</span>,</div><div class="line">    threshold_condition_code=<span class="stringliteral">&quot;$(V) &gt;= 1.0&quot;</span>,</div><div class="line">    reset_code=<span class="stringliteral">&quot;$(V) = 0.0;&quot;</span>,</div><div class="line">    </div><div class="line">    param_names=[<span class="stringliteral">&quot;tau&quot;</span>],</div><div class="line">    var_name_types=[(<span class="stringliteral">&quot;V&quot;</span>, <span class="stringliteral">&quot;scalar&quot;</span>, VarAccess_READ_WRITE)])</div></div><!-- fragment --><p> </div></p>
<h2><a class="anchor" id="neuron_derived_params"></a>
Derived Parameters</h2>
<p>"Derived parameters" are a mechanism for enhanced efficiency when running neuron models. If parameters with model-side meaning, such as time constants or conductances always appear in a certain combination in the model, then it is more efficient to pre-compute this combination and define it as a dependent parameter.</p>
<p>For example, because the equation defining the previous leaky integrator example has an algebraic solution, it can be more accurately solved as follows - using a derived parameter to calculate <img class="formulaInl" alt="$\exp\left(\frac{-t}{\tau}\right)$" src="../../form_1.png"/>:  <div class='toggleable_div label_cpp' style='display: none;'></p><div class="fragment"><div class="line"><span class="keyword">class </span>LeakyIntegrator2 : <span class="keyword">public</span> <a class="code" href="../../d7/dad/classNeuronModels_1_1Base.html">NeuronModels::Base</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <a class="code" href="../../d4/d13/models_8h.html#ae0c817e85c196f39cf62d608883cda13">DECLARE_MODEL</a>(LeakyIntegrator2, 1, 1);</div><div class="line"></div><div class="line">    <a class="code" href="../../d3/dc0/neuronModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE</a>(<span class="stringliteral">&quot;$(V) = $(Isyn) - $(ExpTC)*($(Isyn) - $(V));&quot;</span>);</div><div class="line">    <a class="code" href="../../d3/dc0/neuronModels_8h.html#a9c94b28e6356469d85e3376f3336f0a2">SET_THRESHOLD_CONDITION_CODE</a>(<span class="stringliteral">&quot;$(V) &gt;= 1.0&quot;</span>);</div><div class="line">    <a class="code" href="../../d3/dc0/neuronModels_8h.html#a83b79ae440c7b91c4699b81dac350637">SET_RESET_CODE</a>(<span class="stringliteral">&quot;$(V) = 0.0;&quot;</span>);</div><div class="line"></div><div class="line">    <a class="code" href="../../de/d6c/snippet_8h.html#a75315265035fd71c5b5f7d7f449edbd7">SET_PARAM_NAMES</a>({<span class="stringliteral">&quot;tau&quot;</span>});</div><div class="line">    <a class="code" href="../../d4/d13/models_8h.html#a3025b9fc844fccdf8cc2b51ef4a6e0aa">SET_VARS</a>({{<span class="stringliteral">&quot;V&quot;</span>, <span class="stringliteral">&quot;scalar&quot;</span>, <a class="code" href="../../de/dfb/varAccess_8h.html#ae8a5891c5d3beb45321e2f850539452faa7b843fb734e3b3fea8e5f902d3f4144">VarAccess::READ_WRITE</a>}});</div><div class="line">    <a class="code" href="../../de/d6c/snippet_8h.html#aa592bfe3ce05ffc19a8f21d8482add6b">SET_DERIVED_PARAMS</a>({</div><div class="line">        {<span class="stringliteral">&quot;ExpTC&quot;</span>, [](<span class="keyword">const</span> vector&lt;double&gt; &amp;pars, <span class="keywordtype">double</span> dt){ <span class="keywordflow">return</span> std::exp(-dt / pars[0]); }}});</div><div class="line">};</div><div class="line"><a class="code" href="../../d4/d13/models_8h.html#a0f3d066ed16dd93ee24912f38826520b">IMPLEMENT_MODEL</a>(LeakyIntegrator2);</div></div><!-- fragment --><p> </div>  <div class='toggleable_div label_python' style='display: none;'></p><div class="fragment"><div class="line">leaky_integrator_2_model = genn_model.create_custom_neuron_class(</div><div class="line">    <span class="stringliteral">&quot;leaky_integrator_2&quot;</span>,</div><div class="line"></div><div class="line">    sim_code=<span class="stringliteral">&quot;$(V) = $(Isyn) - $(ExpTC)*($(Isyn) - $(V));&quot;</span>,</div><div class="line">    threshold_condition_code=<span class="stringliteral">&quot;$(V) &gt;= 1.0&quot;</span>,</div><div class="line">    reset_code=<span class="stringliteral">&quot;$(V) = 0.0;&quot;</span>,</div><div class="line"></div><div class="line">    param_names=[<span class="stringliteral">&quot;tau&quot;</span>],</div><div class="line">    var_name_types=[(<span class="stringliteral">&quot;V&quot;</span>, <span class="stringliteral">&quot;scalar&quot;</span>, VarAccess_READ_WRITE)],</div><div class="line">    derived_params=[(<span class="stringliteral">&quot;ExpTC&quot;</span>, genn_model.create_dpf_class(lambda pars, dt: np.exp(-dt / pars[0]))())])</div></div><!-- fragment --><p> </div> GeNN provides several additional features that might be useful when defining more complex neuron models.</p>
<h2><a class="anchor" id="neuron_support_code"></a>
Support code</h2>
<p>Support code enables a code block to be defined that contains supporting code that will be utilized in multiple pieces of user code. Typically, these are functions that are needed in the sim code or threshold condition code. If possible, these functions should be prefixed with <code>SUPPORT_CODE_FUNC</code> so that both GPU and CPU versions of GeNN code have an appropriate support code function available. The support code is protected with a namespace so that it is exclusively available for the neuron population whose neurons define it. Support code is added to a model using the <span class='toggleable_div label_cpp' style='display: none;'><code><a class="el" href="../../d3/dc0/neuronModels_8h.html#a11d60ec86ac6804c9c8a133f7bec526d">SET_SUPPORT_CODE()</a></code> macro </span><span class='toggleable_div label_python' style='display: none;'> <code>support_code</code> keyword argument </span>, for example:  <div class='toggleable_div label_cpp' style='display: none;'></p><div class="fragment"><div class="line"><a class="code" href="../../d3/dc0/neuronModels_8h.html#a11d60ec86ac6804c9c8a133f7bec526d">SET_SUPPORT_CODE</a>(<span class="stringliteral">&quot;SUPPORT_CODE_FUNC scalar mysin(float x){ return sin(x); }&quot;</span>);</div></div><!-- fragment --><p> </div>  <div class='toggleable_div label_python' style='display: none;'></p><div class="fragment"><div class="line">support_code=<span class="stringliteral">&quot;SUPPORT_CODE_FUNC scalar mysin(float x){ return sin(x); }&quot;</span></div></div><!-- fragment --><p> </div></p>
<h2><a class="anchor" id="neuron_extra_global_param"></a>
Extra global parameters</h2>
<p>Extra global parameters are parameters common to all neurons in the population. However, unlike the standard neuron parameters, they can be varied at runtime meaning they could, for example, be used to provide a global reward signal. These parameters are defined by using the <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../de/d6c/snippet_8h.html#aa33e3634a531794ddac1ad49bde09071">SET_EXTRA_GLOBAL_PARAMS()</a> macro</span><span class='toggleable_div label_python' style='display: none;'> <code>extra_global_params</code> keyword argument </span> to specify a list of variable names and type strings (like the <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../d4/d13/models_8h.html#a3025b9fc844fccdf8cc2b51ef4a6e0aa">SET_VARS()</a> macro</span><span class='toggleable_div label_python' style='display: none;'> <code>var_name_types</code> keyword argument </span>). For example:  <div class='toggleable_div label_cpp' style='display: none;'></p><div class="fragment"><div class="line"><a class="code" href="../../de/d6c/snippet_8h.html#aa33e3634a531794ddac1ad49bde09071">SET_EXTRA_GLOBAL_PARAMS</a>({{<span class="stringliteral">&quot;R&quot;</span>, <span class="stringliteral">&quot;float&quot;</span>}});</div></div><!-- fragment --><p> </div>  <div class='toggleable_div label_python' style='display: none;'></p><div class="fragment"><div class="line">extra_global_params=[(<span class="stringliteral">&quot;R&quot;</span>, <span class="stringliteral">&quot;float&quot;</span>)]</div></div><!-- fragment --><p> </div> These variables are available to all neurons in the population. They can also be used in synaptic code snippets; in this case it need to be addressed with a <code>_pre</code> or <code>_post</code> postfix. For example, if the model with the "R" parameter was used for the pre-synaptic neuron population, the weight update model of a synapse population could have simulation code like:  <div class='toggleable_div label_cpp' style='display: none;'></p><div class="fragment"><div class="line"><a class="code" href="../../d3/dc0/neuronModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE</a>(<span class="stringliteral">&quot;$(x)= $(x)+$(R_pre);&quot;</span>);</div></div><!-- fragment --><p> </div>  <div class='toggleable_div label_python' style='display: none;'></p><div class="fragment"><div class="line">sim_code=<span class="stringliteral">&quot;$(x)= $(x)+$(R_pre);&quot;</span></div></div><!-- fragment --><p> </div> where we have assumed that the weight update model has a variable <code>x</code> and our synapse type will only be used in conjunction with pre-synaptic neuron populations that do have the extra global parameter <code>R</code>. If the pre-synaptic population does not have the required variable/parameter, GeNN will fail when compiling the kernels.</p>
<h2><a class="anchor" id="neuron_additional_input"></a>
Additional input variables</h2>
<p>Normally, neuron models receive the linear sum of the inputs coming from all of their synaptic inputs through the $(inSyn) variable. However neuron models can define additional input variables - allowing input from different synaptic inputs to be combined non-linearly. For example, if we wanted our leaky integrator to operate on the the product of two input currents, it could be defined as follows:  <div class='toggleable_div label_cpp' style='display: none;'></p><div class="fragment"><div class="line"><a class="code" href="../../d3/dc0/neuronModels_8h.html#a96a3e23f5c7309a47bc6562e0be81e99">SET_ADDITIONAL_INPUT_VARS</a>({{<span class="stringliteral">&quot;Isyn2&quot;</span>, <span class="stringliteral">&quot;scalar&quot;</span>, 1.0}});</div><div class="line"><a class="code" href="../../d3/dc0/neuronModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE</a>(<span class="stringliteral">&quot;const scalar input = $(Isyn) * $(Isyn2);\n&quot;</span></div><div class="line">             <span class="stringliteral">&quot;$(V) = input - $(ExpTC)*(input - $(V));&quot;</span>);</div></div><!-- fragment --><p> </div>  <div class='toggleable_div label_python' style='display: none;'></p><div class="fragment"><div class="line">additional_input_vars=[(<span class="stringliteral">&quot;Isyn2&quot;</span>, <span class="stringliteral">&quot;scalar&quot;</span>, 1.0)],</div><div class="line">sim_code=</div><div class="line">    <span class="stringliteral">&quot;&quot;</span><span class="stringliteral">&quot;</span></div><div class="line"><span class="stringliteral">    const scalar input = $(Isyn) * $(Isyn2);</span></div><div class="line"><span class="stringliteral">    $(V) = input - $(ExpTC)*(input - $(V));</span></div><div class="line"><span class="stringliteral">    &quot;</span><span class="stringliteral">&quot;&quot;</span>,</div></div><!-- fragment --><p> </div> where the <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../d3/dc0/neuronModels_8h.html#a96a3e23f5c7309a47bc6562e0be81e99">SET_ADDITIONAL_INPUT_VARS()</a> macro</span><span class='toggleable_div label_python' style='display: none;'><code>additional_input_vars</code> keyword argument </span> defines the name, type and its initial value before postsynaptic inputs are applyed (see section <a class="el" href="../../dd/de4/sect_postsyn.html">Postsynaptic integration methods</a> for more details).</p>
<h2><a class="anchor" id="neuron_rng"></a>
Random number generation</h2>
<p>Many neuron models have probabilistic terms, for example a source of noise or a probabilistic spiking mechanism. In GeNN this can be implemented by using the following functions in blocks of model code:</p><ul>
<li><code>$(gennrand_uniform)</code> returns a number drawn uniformly from the interval <img class="formulaInl" alt="$[0.0, 1.0]$" src="../../form_2.png"/></li>
<li><code>$(gennrand_normal)</code> returns a number drawn from a normal distribution with a mean of 0 and a standard deviation of 1.</li>
<li><code>$(gennrand_exponential)</code> returns a number drawn from an exponential distribution with <img class="formulaInl" alt="$\lambda=1$" src="../../form_3.png"/>.</li>
<li><code>$(gennrand_log_normal, MEAN, STDDEV)</code> returns a number drawn from a log-normal distribution with the specified mean and standard deviation.</li>
<li><code>$(gennrand_gamma, ALPHA)</code> returns a number drawn from a gamma distribution with the specified shape.</li>
</ul>
<h1><a class="anchor" id="neuron_pop_own_type"></a>
Creating neuron populations with your own neuron type</h1>
<p>Once defined in this way, new neuron models classes, can be used in network descriptions by referring to their type e.g.  <div class='toggleable_div label_cpp' style='display: none;'></p><div class="fragment"><div class="line">networkModel.addNeuronPopulation&lt;LeakyIntegrator&gt;(<span class="stringliteral">&quot;Neurons&quot;</span>, 1, </div><div class="line">                                                  LeakyIntegrator::ParamValues(20.0), <span class="comment">// tau</span></div><div class="line">                                                  LeakyIntegrator::VarValues(0.0)); <span class="comment">// V</span></div></div><!-- fragment --><p> </div>  <div class='toggleable_div label_python' style='display: none;'></p><div class="fragment"><div class="line">network_model.add_neuron_population(<span class="stringliteral">&quot;Neurons&quot;</span>, 1, leaky_integrator_model, {<span class="stringliteral">&quot;tau&quot;</span>: 20.0}, {<span class="stringliteral">&quot;V&quot;</span>: 0.0})</div></div><!-- fragment --><p> </div> </p><hr/>
<p> <a class="el" href="../../df/dc3/sectDefiningNetwork.html">Previous</a> | <a class="el" href="../../dc/d05/UserManual.html">Top</a> | <a class="el" href="../../d5/d24/sectSynapseModels.html">Next</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/d05/UserManual.html">User Manual</a></li>
    <li class="footer">Generated on Thu Jul 15 2021 12:25:33 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
<script type="text/javascript">
//<![CDATA[
addLanguageToggleButtons();
//]]>
</script>
</body>
</html>
