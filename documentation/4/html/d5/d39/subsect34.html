<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>GeNN: Synaptic matrix types</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../multi-language-utils.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="../../html_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="../../GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">4.8.1</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d39/subsect34.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Synaptic matrix types </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Synaptic matrix types are made up of two components: SynapseMatrixConnectivity and SynapseMatrixWeight. SynapseMatrixConnectivity defines what data structure is used to store the synaptic matrix:</p><ul>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da0706fbbd929bd8abc4de386c53d439ff">SynapseMatrixConnectivity::DENSE</a> stores synaptic matrices as a dense matrix. Large dense matrices require a large amount of memory and if they contain a lot of zeros it may be inefficient.</li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da0459833ba9cad7cfd7bbfe10d7bbbe6e">SynapseMatrixConnectivity::SPARSE</a> stores synaptic matrices in a(padded) 'ragged array' format. In general, this is less efficient to traverse using a GPU than the dense matrix format but does result in significant memory savings for large matrices. Sparse matrix connectivity is stored using several variables whose names, like state variables, have the name of the synapse population appended to them:<ol type="1">
<li><code>const unsigned int maxRowLength</code>: a constant set via the <code><a class="el" href="../../dc/dfa/classSynapseGroup.html#aab6b2fb0ad30189bc11ee3dd7d48dbb2" title="Sets the maximum number of target neurons any source neurons can connect to. ">SynapseGroup::setMaxConnections</a></code> method which specifies the maximum number of connections in any given row (this is the width the structure is padded to).</li>
<li><code>unsigned int *rowLength</code> (sized to number of presynaptic neurons): actual length of the row of connections associated with each presynaptic neuron</li>
<li><code>unsigned int *ind</code> (sized to <code>maxRowLength * number of presynaptic neurons</code>): Indices of corresponding postsynaptic neurons concatenated for each presynaptic neuron. For example, consider a network of two presynaptic neurons connected to three postsynaptic neurons: 0th presynaptic neuron connected to 1st and 2nd postsynaptic neurons, the 1st presynaptic neuron connected only to the 0th neuron. Indexing starts from 0 and X represents a padding value: <div class="fragment"><div class="line">maxRowLength = 2</div><div class="line">ind = [1 2 0 X]</div><div class="line">rowLength = [2 1]  </div></div><!-- fragment --> Weight update model variables associated with the sparsely connected synaptic population will be kept in an array using the same indexing as ind. For example, a variable caled <code>g</code> will be kept in an array such as: <code>g=</code>[g_Pre0-Post1 g_pre0-post2 g_pre1-post0 X]</li>
</ol>
</li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da0287e103671bf22378919a64d4b70699">SynapseMatrixConnectivity::BITMASK</a> is an alternative sparse matrix implementation where which synapses within the matrix are present is specified as a binary array (see <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect olfaction model</a>). This structure is somewhat less efficient than the <code><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da0459833ba9cad7cfd7bbfe10d7bbbe6e">SynapseMatrixConnectivity::SPARSE</a></code> format and doesn't allow individual weights per synapse. However it does require the smallest amount of GPU memory for large networks.</li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da71de203441306efe17e882a16d439b89">SynapseMatrixConnectivity::PROCEDURAL</a> is a new approach where, rather than being stored in memory, connectivity described using <a class="el" href="../../d5/dd4/sectSparseConnectivityInitialisation.html">Sparse connectivity initialisation</a> is generated 'on the fly' as spikes are processed (see <a class="el" href="../../d0/de3/citelist.html#CITEREF_Knight2020">[3]</a> for more information). Therefore, this approach offers very large memory savings for a small performance cost but does not currently support plasticity.</li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da49a65f87e83426c5f9305415b1820360">SynapseMatrixConnectivity::TOEPLITZ</a> is another new approach where, kernel-based connectivity like convolutions described using <a class="el" href="../../d0/d2f/sectToeplitzConnectivityInitialisation.html">Toeplitz connectivity initialisation</a> is generated 'on the fly' as spikes are processed. As well as offering the large memory savings of <code><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da71de203441306efe17e882a16d439b89">SynapseMatrixConnectivity::PROCEDURAL</a></code>, if the batch size is large enough it also out-performs both <code><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da0459833ba9cad7cfd7bbfe10d7bbbe6e">SynapseMatrixConnectivity::SPARSE</a></code> and <code><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da71de203441306efe17e882a16d439b89">SynapseMatrixConnectivity::PROCEDURAL</a></code>.</li>
</ul>
<p> <span class='toggleable_div label_python' style='display: none;'>In Python, <a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da0459833ba9cad7cfd7bbfe10d7bbbe6e">SynapseMatrixConnectivity::SPARSE</a> connectivity can be manually initialised from lists of pre and postsynaptic indices using the <a class="el" href="../../d5/d49/classpygenn_1_1genn__groups_1_1SynapseGroup.html#a89c87f35af246051db899da4c6b5caf3" title="Set ragged format connections between two groups of neurons. ">pygenn.SynapseGroup.set_sparse_connections</a> method.</span> Furthermore the <code>SynapseMatrixWeight</code> defines how</p><ul>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a3c0f0120d3cb9e81daea1d2afa7fbe1fa938873bbf7fe69b2f3836e6103f2a323">SynapseMatrixWeight::INDIVIDUAL</a> allows each individual synapse to have unique weight update model variables.</li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a3c0f0120d3cb9e81daea1d2afa7fbe1faf92bc2c3cbbf79265bfd8deb87b087fa">SynapseMatrixWeight::INDIVIDUAL_PSM</a> allows each postsynapic neuron to have unique post synaptic model variables.</li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a3c0f0120d3cb9e81daea1d2afa7fbe1fa6eecfba72d12922ee1dead07a0ef3334">SynapseMatrixWeight::GLOBAL</a> saves memory by only maintaining one copy of the weight update model variables. This is automatically initialized to the initial value passed to <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../da/dfd/classModelSpec.html#abd4e9128a5d4f5f993907134218af0c2" title="Adds a synapse population to the model using weight update and postsynaptic models managed by the use...">ModelSpec::addSynapsePopulation</a></span><span class='toggleable_div label_python' style='display: none;'> <a class="el" href="../../db/d57/classpygenn_1_1genn__model_1_1GeNNModel.html#ab573f92c82ec25d5c80f94070b6008c0" title="Add a synapse population to the GeNN model. ">pygenn.GeNNModel.add_synapse_population</a> </span>.</li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a3c0f0120d3cb9e81daea1d2afa7fbe1fa71de203441306efe17e882a16d439b89">SynapseMatrixWeight::PROCEDURAL</a> generates weight update model variable values described using <a class="el" href="../../d4/dc6/sectVariableInitialisation.html">Variable initialisation</a> 'on the fly' as spikes are processed. This is typically used alongside <a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#aedb0946699027562bc78103a5d2a578da71de203441306efe17e882a16d439b89">SynapseMatrixConnectivity::PROCEDURAL</a> for large models with static connectivity and weights/delays sampled from probability distributions (see <a class="el" href="../../d0/de3/citelist.html#CITEREF_Knight2020">[3]</a> for an example).</li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a3c0f0120d3cb9e81daea1d2afa7fbe1fa35c10219c45ccfb5b07444fd7e17214c">SynapseMatrixWeight::KERNEL</a> saves memory by sharing a small kernel of weights between all synapses. The size of the kernel is defined by the sparse connectivity initialisation snippet (see <a class="el" href="../../d5/dd4/sectSparseConnectivityInitialisation.html">Sparse connectivity initialisation</a>) or Toeplitz connectivity initialisation snippet (see <a class="el" href="../../d0/d2f/sectToeplitzConnectivityInitialisation.html">Toeplitz connectivity initialisation</a>).</li>
</ul>
<p>Only certain combinations of <code>SynapseMatrixConnectivity</code> and <code>SynapseMatrixWeight</code> are sensible therefore, to reduce confusion, the <code>SynapseMatrixType</code> enumeration defines the following options which can be passed to <span class='toggleable_div label_cpp' style='display: none;'><a class="el" href="../../da/dfd/classModelSpec.html#abd4e9128a5d4f5f993907134218af0c2" title="Adds a synapse population to the model using weight update and postsynaptic models managed by the use...">ModelSpec::addSynapsePopulation</a></span><span class='toggleable_div label_python' style='display: none;'> <a class="el" href="../../db/d57/classpygenn_1_1genn__model_1_1GeNNModel.html#ab573f92c82ec25d5c80f94070b6008c0" title="Add a synapse population to the GeNN model. ">pygenn.GeNNModel.add_synapse_population</a> </span>:</p><ul>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca14329718a99dc337fa3bd33b9104d75d">SynapseMatrixType::SPARSE_GLOBALG</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca4caebb15c1a09f263b6f223241bde1ac">SynapseMatrixType::SPARSE_GLOBALG_INDIVIDUAL_PSM</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9cae7658b74f700d52b421afc540c892d2e">SynapseMatrixType::SPARSE_INDIVIDUALG</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca0103dab4be5e9b66601b43a52ffa00f0">SynapseMatrixType::DENSE_GLOBALG</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca05bf2ba82e234d9d8ba1b92b6287945e">SynapseMatrixType::DENSE_GLOBALG_INDIVIDUAL_PSM</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9cac125fea63eb10ca9b8951ddbe787d7ce">SynapseMatrixType::DENSE_INDIVIDUALG</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca1655cb54ae8edd2462977f30072f8bf8">SynapseMatrixType::BITMASK_GLOBALG</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca1afc3ca441931cf66047766d6a135ff4">SynapseMatrixType::BITMASK_GLOBALG_INDIVIDUAL_PSM</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca50c74aa23e6563dc03d76c83503b0ef4">SynapseMatrixType::PROCEDURAL_GLOBALG</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9cadd8d747d9023d98e9045f39935d2803a">SynapseMatrixType::PROCEDURAL_PROCEDURALG</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca777ee84a834a1f0a7f3ad8ad53ef8c75">SynapseMatrixType::PROCEDURAL_KERNELG</a></li>
<li><a class="el" href="../../dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9ca66e19163af307f939d5d47f4b4e9a2b2">SynapseMatrixType::TOEPLITZ_KERNELG</a></li>
</ul>
<p> <div class='toggleable_div label_python' style='display: none;'> In Python, these matrix types can be selected by their unqualified name e.g. "DENSE_INDIVIDUALG".  </div> </p><hr/>
<p> <a class="el" href="../../d7/d98/sectCustomUpdate.html">Previous</a> | <a class="el" href="../../dc/d05/UserManual.html">Top</a> | <a class="el" href="../../d4/dc6/sectVariableInitialisation.html">Next</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/d05/UserManual.html">User Manual</a></li>
    <li class="footer">Generated on Fri Apr 21 2023 16:20:24 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
<script type="text/javascript">
//<![CDATA[
addLanguageToggleButtons();
//]]>
</script>
</body>
</html>
